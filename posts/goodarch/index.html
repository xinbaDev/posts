<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>What is a good architecture? &#183; Alex's Blog</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/fonts.css><link rel=icon href=favicon.ico><link rel=icon type=image/png sizes=32x32 href=/images/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/images/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link href rel=alternate type=application/rss+xml title="Alex's Blog"></head><body><nav class=nav><div class=nav-container><a href=/><h2 class=nav-title>Alex's Blog</h2></a><ul><li><a href=/posts><span>Posts</span></a></li></ul></div></nav><main><div class=post><div class=post-info><span>Written by</span>
Alex<br><span>on&nbsp;</span><time datetime="2020-08-04 19:58:11 +1100 +1100">August 4, 2020</time></div><h1 class=post-title>What is a good architecture?</h1><div class=post-line></div><p>I&rsquo;ve been using AWS cloud services for several years now, and recently I&rsquo;ve been preparing for the AWS Certified Solution Architect exam. During this time, I have reviewed the various features and systems of AWS cloud, and I have also read many AWS whitepapers. Lately, a question has been slowly emerging in my mind &ndash; what is a good architecture, or what are the characteristics of a good architecture? I have been thinking about this question for a while and have read many excellent blog posts on the subject. My impression is that many architects focus on how to use various framework technologies to achieve high availability, reliability, and performance services. While this has been eye-opening, it has also given me the impression that all you need to do is master various framework technologies (including their applicability and trade-offs) to create a good architecture. However, after reading various AWS whitepapers, I have been prompted to rethink what makes a good architecture and have gained new insights.</p><p>This article mainly takes the whitepaper of the <a href="https://d1.awsstatic.com/whitepapers/architecture/AWS_Well-Architected_Framework.pdf?trk=wp_card">AWS Well-Architected Framework</a> as the source, and analyzes it from the following five perspectives (which AWS considers to be the 5 pillars of a good architecture), briefly discussing my understanding.</p><ol><li><strong><a href="https://d0.awsstatic.com/whitepapers/architecture/AWS-Operational-Excellence-Pillar.pdf?ref=wellarchitected-wp">Operational Excellence Pillar</a></strong></li><li><strong>(<a href="https://d0.awsstatic.com/whitepapers/architecture/AWS-Security-Pillar.pdf?ref=wellarchitected-wp">Security Pillar</a>)</strong></li><li><strong>(<a href="https://d0.awsstatic.com/whitepapers/architecture/AWS-Reliability-Pillar.pdf?ref=wellarchitected-wp">Reliability Pillar</a>)</strong></li><li><strong>(<a href="https://d0.awsstatic.com/whitepapers/architecture/AWS-Performance-Efficiency-Pillar.pdf?ref=wellarchitected-wp">Performance Efficiency Pillar</a>)</strong></li><li><strong>(<a href="https://d0.awsstatic.com/whitepapers/architecture/AWS-Cost-Optimization-Pillar.pdf?ref=wellarchitected-wp">Cost Optimization Pillar</a>)</strong></li></ol><h2 id=excellent-operations>Excellent Operations</h2><p>Among the five pillars, AWS places excellent operations at the forefront, indicating its importance. My understanding is that a good architecture must serve the business and help it succeed as much as possible. If an architecture performs well and is reliable, but is difficult to operate, then it is not a good architecture. In a difficult-to-operate architecture, programmers have to spend a lot of time and energy deploying monitoring services, and manual operations are prone to errors, greatly increasing the human cost of the architecture and affecting the rapid development and iteration of functions. Therefore, a good architecture must also be a well-operated architecture.</p><p>To achieve good operations, automation is essential. For example, the most basic CICD liberates programmers from manual testing and deployment, greatly speeding up the updating and release of programs. More broadly, all operational operations should be implemented as much as possible with code (including horizontal scaling of services and even disaster recovery), which is called operations as code. If an architecture has the ability to automatically change its own state based on the service situation, then it can minimize human intervention (reduce human errors) while responding faster to changes in the business.</p><p>Today, the migration of enterprises to the cloud is the trend, and microservices have become the &ldquo;best practice&rdquo; for large clusters in the cloud. Microservices have many advantages and fully utilize the advantages of the cloud, but they also bring the problem of difficult deployment and maintenance. One operation may involve hundreds or even thousands of instances, and manual operations are no longer possible. This places higher demands on monitoring and automation.</p><h2 id=security>Security</h2><p>Reliable security is the cornerstone of all services. In this regard, I have found that domestic architects generally overlook security when introducing architecture, as if security is an independent module apart from architecture. In AWS&rsquo;s view, security is an essential element for a successful architecture. I believe that architecture serves the business, and if the architecture is not secure, it is difficult to ensure the security of the business.</p><p>A good architecture must fully integrate security into all aspects of the design. For example, there must be a secure permission authentication mechanism for accessing various resources, based on the principle of least privilege, to strictly limit which resources can be accessed, by whom, and so on. Additionally, how data is securely stored and transmitted are also issues that a good architecture must consider.</p><p>Taking AWS as an example, IAM (AWS Identity and Access Management) is a global security measure for controlling access to AWS services. Through IAM, all AWS services, including computing resources, storage resources, network resources, and so on, can be uniformly managed for security purposes. You can set which user or even which application can access the corresponding resources. Security groups are also a very useful security measure. Their primary function is similar to a firewall, which can be used on resources such as EC2, RDS, etc., to restrict access to IP addresses, IP ranges, and access ports, making it very convenient. In terms of data security, AWS has the KMS (Key Management Service) service to centrally manage keys and encrypt data using these keys. The encryption and decryption process of EBS (Elastic Block Store) for accessing EC2 is transparent to users, making it easy to encrypt the entire file system. AWS has many other security features, such as WAF, NACL, CloudHSM, and so on.</p><h2 id=reliability>Reliability</h2><p>Of the five pillars, reliability is the one that AWS devotes the most attention to in its introduction (with over 60 pages in the whitepaper, almost double the average of the other four), highlighting its importance. AWS has also put in a lot of effort to ensure that the services it provides are highly available. AWS believes that the main design principles for the cloud are:</p><ol><li><strong>Automatically simulate failure and test how to repair it</strong><ul><li>Netflix has an open-source project called<a href=https://github.com/netflix/chaosmonkey>chaosmonkey</a>, , which tests the robustness of an architecture by automatically simulating failure scenarios. Netflix schedules a day to test its own production servers, randomly shutting down one of their services to see how the system responds. This is similar to a security drill.</li></ul></li><li><strong>Automatically repair from errors</strong><ul><li>This was mentioned in the section on excellence in operations. Automated repairs can reduce human error and also allow for quick response, making it an important indicator of an architecture&rsquo;s reliability.</li></ul></li><li><strong>Automatic horizontal scaling</strong><ul><li>The service should be able to scale elastically. When the load reaches a certain level (such as the CPU being above 80% in the past 15 minutes), the service can automatically increase resources to handle the corresponding requests. When the load decreases (such as the CPU being below 40% in the past 30 minutes), the service can automatically reduce resources to reduce costs.</li></ul></li><li><strong>Don&rsquo;t guess the maximum load</strong><ul><li>AWS believes that the characteristic of cloud computing is that resources can be dynamically added and removed, so it is not necessary to set a resource limit for the system architecture. However, this does not mean that predicting the architecture&rsquo;s load capacity is not important; rather, it means that a scalable architecture should be designed. I once read a sharing from a Tencent architect who believed that a qualified architect should have the ability to evaluate the entire system&rsquo;s load capacity, and I fully agree with that.</li></ul></li><li><strong>Management structure change</strong><ul><li>Now that infrastructure as code can manage the entire architecture very well, just like managing code, it can have version control and even CI/CD. With this powerful management capability, even if the entire architecture is destroyed, it can be quickly rebuilt as long as the relevant code is still available. This was previously unimaginable, and all of this is thanks to cloud technology.</li></ul></li></ol><p>In the AWS Security Pillar whitepaper, a lot of attention is also given to how to achieve reliability from two nines to five nines. It introduces how to reach the corresponding reliability standards from multiple perspectives, such as monitoring, backup, deployment, scaling, and disaster recovery. Users can choose appropriate solutions to meet their reliability requirements based on their system&rsquo;s importance and cost budget. This is also one of the advantages of the cloud, providing many options that allow users to easily customize their architecture according to their needs.</p><h2 id=efficiency>Efficiency</h2><p>Efficiency is a crucial component of a good architecture. Google conducted an experiment that showed that loading a page with 10 search results took 0.4 seconds, while loading a page with 30 search results took 0.9 seconds. As a result, the latter option caused a 20% decrease in Google&rsquo;s total traffic and revenue. This demonstrates the importance of efficiency in web-based businesses.</p><p>For example, in a web application, when a user enters a URL into their browser and hits &ldquo;enter,&rdquo; a series of requests are sent. Firstly, if the domain is not cached locally, the corresponding domain must be resolved. This is done by sending a request to the DNS server, which returns the IP address associated with the domain. Then the browser attempts to establish a TCP connection with the server at that IP address, which involves the familiar three-way handshake. If the protocol is HTTPS, the encryption method must also be negotiated. Once the connection is established, the server generates a response and sends it back to the client&rsquo;s browser. The response generation and delivery process is divided into static and dynamic responses. Static responses are relatively simple and generally involve returning some static content, such as image files, which are the same for every user. These can be cached in various ways, such as using a content delivery network (CDN), which can cache files on machines distributed worldwide so that users can obtain the corresponding files directly from the nearest server when they request them, greatly improving response speed. Dynamic content, on the other hand, is usually more complex and involves business logic and dependencies on other services, such as databases. The traditional bottleneck for dynamic web responses is usually the database. To improve response speed, typical optimization methods include adding a cache (such as Redis), read/write separation, or even table and database splitting. These are all general optimization solutions, and specific optimizations depend on the specifics of the business.</p><p>Through this example, we can see that improving efficiency involves many aspects. A good architecture should make it relatively easy to optimize each part. This is an advantage of microservice architecture, in my opinion. Each service can use the most efficient framework, technology, or even resources. For example, a dedicated machine optimized for high IO can be used for databases, while services sensitive to latency can be deployed on high-bandwidth networks. Another advantage of cloud services is that they have sufficient technology and personnel to provide users with updated and better technologies, which is something that most companies cannot achieve.</p><h2 id=cost-optimization>Cost Optimization</h2><p>Compared to the other four pillars, cost is probably the least mentioned topic among domestic architects. AWS believes that a good architecture should make use of all resources as efficiently as possible. For a company to succeed, cost-saving is very important. Even if a business is successful, if it burns through money like a bottomless pit, it will eventually be eliminated.</p><p>Therefore, while improving reliability and performance, we also need to ask how much help this improvement will bring to the business. Is it worth investing how much cost to achieve corresponding reliability and performance improvements? What is the company&rsquo;s critical business? How to maximize business profits with the minimum cost?</p><p>To achieve cost optimization, powerful monitoring and corresponding elastic scaling are essential. I understand that this is also one of the biggest advantages of cloud services. Enterprises can timely increase or decrease the computing, storage, and even network bandwidth resources they need according to demand, which is difficult for traditional on-premise enterprise architectures to achieve. At the same time, a deep understanding of the business is also required. In reality, you cannot be given unlimited resources to improve performance and reliability. You can only guarantee the important business paths first and then use this as a basis to further optimize and improve the system&rsquo;s reliability and efficiency. Therefore, some people say that good architecture is not built in one fell swoop but evolves over time.</p><h2 id=written-at-the-end>Written at the end</h2><p>The more I write, the more I feel that this is an article introducing the power of cloud services. Nowadays, it feels difficult to meet AWS&rsquo;s standards for good architecture without using cloud services, especially for small companies. However, with cloud services, even small companies can achieve good architecture. It&rsquo;s not surprising that the cloud has become so popular and mainstream in such a short amount of time.</p></div><div class=pagination><a href=/posts/fallocate/ class="left arrow">&#8592;</a>
<a href=/posts/sql/ class="right arrow">&#8594;</a>
<a href=# class=top>Top</a></div></main><footer><span>&copy; <time datetime="2023-07-11 10:42:12.046365899 +0000 UTC m=+0.048274683">2023</time> Alex. Made with <a href=https://gohugo.io>Hugo</a> using the <a href=https://github.com/EmielH/tale-hugo/>Tale</a> theme.</span></footer></body></html>